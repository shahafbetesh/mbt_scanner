<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>סורק נוכחות</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 90vh; background-color: #f4f4f9; color: #333; }
        #container { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 400px; }
        h1 { color: #4a4a4a; }
        input, button { width: 100%; padding: 12px; margin-top: 10px; border-radius: 8px; border: 1px solid #ccc; font-size: 16px; box-sizing: border-box; }
        button { background-color: #007aff; color: white; font-weight: bold; border: none; cursor: pointer; transition: background-color 0.2s; }
        button:disabled { background-color: #aaa; }
        #reader { width: 100%; margin-top: 20px; border-radius: 8px; overflow: hidden; display: none; }
        #result { margin-top: 20px; font-weight: bold; min-height: 40px; color: #28a745; }
    </style>
</head>
<body>
    <div id="container">
        <h1>סורק נוכחות</h1>
        <input type="text" id="sessionName" placeholder="רשום את שם המפגש (למשל, מפגש-2)">
        <button id="startButton">התחל סריקה</button>
        <div id="reader"></div>
        <div id="result"></div>
    </div>

    <script>
    !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Html5Qrcode={})}(this,function(e){"use strict";var t,r={facingMode:"user",zoom:0},n={fps:10,qrbox:250,aspectRatio:1.7777778,disableFlip:!1,videoConstraints:r};function i(e){return e||(n.fps=10,n.qrbox=250,n.aspectRatio=1.7777778,n.disableFlip=!1,n.videoConstraints=r),{fps:e.fps||n.fps,disableFlip:!!e.disableFlip,qrbox:e.qrbox||n.qrbox,aspectRatio:e.aspectRatio||n.aspectRatio,videoConstraints:e.videoConstraints||n.videoConstraints}}var o,s,a;function c(e){var t;return(t=e,!!(t.id||t.deviceId))?e.id?e.id:e.deviceId:e}function u(e){return"string"==typeof e}function l(e){return"function"==typeof e}(t||(t={})).QR_CODE="qr_code",(o||(o={})).AZTEC="aztec",(o||(o={})).CODABAR="codabar",(o||(o={})).CODE_39="code_39",(o||(o={})).CODE_93="code_93",(o||(o={})).CODE_128="code_128",(o||(o={})).DATA_MATRIX="data_matrix",(o||(o={})).MAXICODE="maxicode",(o||(o={})).ITF="itf",(o||(o={})).EAN_13="ean_13",(o||(o={})).EAN_8="ean_8",(o||(o={})).PDF_417="pdf_417",(o||(o={})).RSS_14="rss_14",(o||(o={})).RSS_EXPANDED="rss_expanded",(o||(o={})).UPC_A="upc_a",(o||(o={})).UPC_E="upc_e",(o||(o={})).UPC_EAN_EXTENSION="upc_ean_extension",(s||(s={})).PORTRAIT="portrait",(s||(s={})).LANDSCAPE="landscape",(a||(a={})).ERROR="error",a.WARNING="warning",a.INFO="info";class d{constructor(e,t){this.format=e,this.type=t}static create(e){const r=e.split(",");if(1==r.length)return"qr_code"===r[0]?new d(t.QR_CODE,"code"):new d(o[r[0]],"code");{const e=[],t=[];for(const n of r)"qr_code"===n?e.push(n):t.push(o[n]);if(0!==e.length&&0!==t.length)throw"The decoder library doesn't support mixing QR code with other formats.";return 0!==t.length?new d(t,"code"):new d(e,"code")}}}class h{constructor(e,t){this.data=e,this.decodedText=t}static create(e,t){const r=[];for(const n of e)r.push(new h(n.rawValue,n.format));return r}}class p{constructor(e){this.message=e,this.name="UnsupportedOperationException"}toString(){return`${this.name}: ${this.message}`}}function m(e){return e.LuminanceSource?e:e.default?e.default:e}function f(e){return e.BinaryBitmap?e:e.default?e.default:e}function g(e){return e.Result?e:e.default?e.default:e}function _(e){return e.DecodeHintType?e:e.default?e.default:e}function v(e){return e.MultiFormatReader?e:e.default?e.default:e}class b{constructor(e,t){if(!t)throw"Use Html5Qrcode.getCameras() to get list of cameras.";this.format=d.create(e),this.verbose=t,this.decoder=null}scan(e,t,r,n){return this.scanAsync(e,t,r,n)}async scanAsync(e,t,r,n){if(!r||!l(r))throw"successCallback is required callback.";if(n&&!l(n))throw"errorCallback is required callback.";const o=this;return o.decoder||await this.initializeDecoder(),new Promise((s,a)=>{o.decoder.scan(e,t,e=>{const t=h.create(e,o.verbose);r(t.decodedText,t)},e=>{"string"==typeof e&&-1!==e.indexOf("NotFoundException")?n&&n("QR code not found."):n&&n(e)}).then(e=>{s(e)}).catch(e=>{a(e)})})}async initializeDecoder(){if(this.format.type,this.format.format,this.decoder)return;const e=this.verbose;if(!window.ZXing)throw"Use html5-qrcode.min.js without edit, ZXing not found.";const t=await window.ZXing,
